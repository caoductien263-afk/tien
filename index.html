<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Mina Flashcard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <div id="app">
        <section id="home-screen" class="screen active">
            <div class="app-header">
                <h1>Mina Flashcard üáØüáµ</h1>
                <div class="streak-badge">
                    <span id="streak-fire">üî•</span> 
                    <span id="streak-count">0</span> ng√†y
                </div>
            </div>
            
            <div class="content-body">
                <div id="daily-quests" class="quest-box">
                    <h3>üéØ Nhi·ªám v·ª• h√¥m nay</h3>
                    <ul id="quest-list"></ul>
                </div>

                <div class="main-actions">
                    <button onclick="createNewDeck()" class="btn-action primary-gradient large">+ B√†i m·ªõi</button>
                    <div class="row">
                        <button onclick="showScreen('stats-screen')" class="btn-action purple">üìä Th·ªëng k√™</button>
                        <button onclick="openQuickStudy()" class="btn-action orange">‚ö° H·ªçc nhanh</button>
                    </div>
                </div>
                
                <div class="section-title">
                    <h3>Danh s√°ch b√†i h·ªçc</h3>
                    <small onclick="exportData()">Sao l∆∞u</small>
                </div>
                <div id="deck-list" class="deck-list"></div>
                
                <div class="footer-link">
                    <label for="import-file">Kh√¥i ph·ª•c d·ªØ li·ªáu</label>
                    <input type="file" id="import-file" onchange="importData(event)" style="display:none;">
                </div>
            </div>
        </section>

        <section id="quick-setup-screen" class="screen">
            <div class="nav-header">
                <button onclick="showScreen('home-screen')" class="btn-icon">‚úï</button>
                <h2>H·ªçc nhanh</h2>
                <div style="width:40px"></div>
            </div>
            <div class="content-body">
                <div class="card-box">
                    <h3>S·ªë l∆∞·ª£ng th·∫ª</h3>
                    <input type="number" id="quick-count" value="10" min="5" class="input-styled">
                </div>
                <div class="card-box flex-grow">
                    <h3>Ch·ªçn ngu·ªìn</h3>
                    <div id="quick-deck-list" class="scroll-list"></div>
                </div>
            </div>
            <div class="bottom-dock">
                <button onclick="startQuickSession()" class="btn-action primary-gradient full">B·∫Øt ƒë·∫ßu ngay üöÄ</button>
            </div>
        </section>

        <section id="stats-screen" class="screen">
            <div class="nav-header">
                <button onclick="showScreen('home-screen')" class="btn-icon">‚¨Ö</button>
                <h2>Th·ªëng k√™</h2>
                <div style="width:40px"></div>
            </div>
            <div class="content-body">
                <div class="stats-grid">
                    <div class="stat-item">
                        <span id="today-time">0p</span>
                        <small>H√¥m nay</small>
                    </div>
                    <div class="stat-item">
                        <span id="total-days">0</span>
                        <small>T·ªïng ng√†y</small>
                    </div>
                </div>
                <div class="card-box">
                    <h3>‚è≥ 7 ng√†y qua</h3>
                    <div class="bar-chart" id="weekly-chart"></div>
                </div>
            </div>
        </section>

        <section id="deck-detail-screen" class="screen">
            <div class="nav-header">
                <button onclick="showScreen('home-screen')" class="btn-icon">‚¨Ö</button>
                <h2 id="current-deck-name" class="truncate">Chi ti·∫øt</h2>
                <button onclick="deleteCurrentDeck()" class="btn-icon danger">üóëÔ∏è</button>
            </div>
            
            <div class="content-body">
                <div class="stats-mini">
                    <div><b id="card-count">0</b> th·∫ª</div>
                    <div class="divider"></div>
                    <div><b id="star-count">0</b> sao</div>
                </div>

                <div class="action-grid">
                    <button onclick="startStudy(false)" class="btn-action green">H·ªçc b√†i</button>
                    <button onclick="startQuiz(false)" class="btn-action blue">Tr·∫Øc nghi·ªám</button>
                    <button onclick="startStudy(true)" class="btn-action yellow">√în th·∫ª sao</button>
                    <button onclick="startQuiz(true)" class="btn-action orange">Quiz sao</button>
                </div>
                
                <div class="tool-row">
                    <button onclick="showScreen('import-screen')" class="btn-small">üì• Th√™m t·ª´</button>
                    <button onclick="shuffleDeck()" class="btn-small">üîÄ Tr·ªôn th·∫ª</button>
                </div>

                <div id="card-list" class="card-list-container"></div>
            </div>
        </section>

        <section id="import-screen" class="screen">
            <div class="nav-header">
                <button onclick="closeImport()" class="btn-icon">‚úï</button>
                <h2>Nh·∫≠p t·ª´ v·ª±ng</h2>
                <button onclick="handleBulkImport()" class="btn-text">L∆∞u</button>
            </div>
            <div class="content-body">
                <p class="guide-text">Nh·∫≠p: <b>M·∫∑t tr∆∞·ªõc - M·∫∑t sau</b><br>D√πng d·∫•u ph·∫©y ·ªü m·∫∑t sau ƒë·ªÉ xu·ªëng d√≤ng.</p>
                <textarea id="bulk-input" class="textarea-styled" placeholder="V√≠ d·ª•:&#10;Â≠¶Áîü - „Åå„Åè„Åõ„ÅÑ, H·ªåC SINH&#10;ÂÖàÁîü - „Åõ„Çì„Åõ„ÅÑ, GI√ÅO VI√äN"></textarea>
            </div>
        </section>

        <section id="study-screen" class="screen">
            <div class="nav-header">
                <button onclick="stopStudySession()" class="btn-icon">‚úï</button>
                <span id="study-progress" class="progress-pill">1/10</span>
                <button onclick="toggleStarCurrent()" class="btn-icon">‚≠ê</button>
            </div>
            
            <div class="flashcard-area">
                <div class="card-scene">
                    <div class="card-object" id="main-card" onclick="flipCard()">
                        <div class="face front">
                            <div id="star-indicator" class="star-badge hidden">‚≠ê</div>
                            <div class="card-content">
                                <h2 id="front-text">Ti·∫øng Nh·∫≠t</h2>
                                <small>Ch·∫°m ƒë·ªÉ l·∫≠t</small>
                            </div>
                            <button class="speaker-btn" onclick="speakCurrent(event)">üîä</button>
                        </div>
                        <div class="face back">
                            <div class="card-content" id="back-text">Ti·∫øng Vi·ªát</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="control-dock">
                <button onclick="markKnown(false)" class="btn-control wrong">Ch∆∞a thu·ªôc</button>
                <button onclick="markKnown(true)" class="btn-control correct">ƒê√£ thu·ªôc</button>
            </div>
        </section>

        <section id="quiz-screen" class="screen">
            <div class="nav-header">
                <button onclick="stopStudySession()" class="btn-icon">‚úï</button>
                <span id="quiz-progress" class="progress-pill">1/10</span>
                <span id="quiz-score" class="score-pill">0</span>
            </div>
            
            <div class="quiz-body">
                <div class="question-card">
                    <h2 id="quiz-question">?</h2>
                    <button class="speaker-btn-sm" onclick="speakCurrent(event)">üîä</button>
                </div>

                <div class="quiz-wrapper">
                    <div id="quiz-overlay" onclick="revealAnswers()">
                        <span>üëÅÔ∏è Hi·ªán ƒë√°p √°n</span>
                    </div>
                    <div id="quiz-options" class="options-grid blurred-grid"></div>
                </div>
            </div>
        </section>
    </div>
    <script src="script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>